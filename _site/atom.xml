<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>Martin Shwalbe - Hounddog</title>
    <link href="http://hounddog.github.com/atom.xml" rel="self"/>
    <link href="http://hounddog.github.com/"/>
    <updated>2013-05-30T03:34:48+02:00</updated>
    <id>http://hounddog.github.com</id>
    <author>
        <name>Martin Shwalbe</name>
    </author>
    
    <entry>
        <title>Continuous Deployment</title>
        <link href="http://hounddog.github.com/blog/continuous-deployment"/>
        <updated>2013-05-20T00:00:00+02:00</updated>
        <id>http://hounddog.github.com/blog/continuous-deployment</id>
        <content type="html">        &lt;div class=&quot;reveal&quot;&gt;

            &lt;!-- Any section element inside of this container is displayed as a slide --&gt;
            &lt;div class=&quot;slides&quot;&gt;

                &lt;section&gt;
                    &lt;h1&gt;
                        &lt;span class=&quot;doctrine-color&quot;&gt;Doctrine 2&lt;/span&gt;
                        &amp;amp;
                        &lt;span class=&quot;zf-color&quot;&gt;ZF2&lt;/span&gt;
                    &lt;/h1&gt;
                    &lt;h1&gt;
                        &lt;img
                            src=&quot;assets/img/doctrine.svg&quot;
                            alt=&quot;Doctrine Project&quot; border=&quot;0&quot;
                            height=&quot;200px&quot;
                            style=&quot;margin-bottom: -50px; &quot;
                        /&gt;
                        +
                        &lt;img
                            src=&quot;assets/img/zf-logo-large.png&quot;
                            alt=&quot;Zend Framework 2&quot;
                            border=&quot;0&quot;
                            height=&quot;200px&quot;
                            style=&quot;margin-bottom: -50px;&quot;
                        /&gt;
                    &lt;/h1&gt;
                &lt;/section&gt;
                &lt;section&gt;
                    &lt;h2&gt;
                        &lt;img
                            src=&quot;assets/img/ocramius.gif&quot;
                            alt=&quot;Marco Pivetta&quot;
                            style=&quot;width: 50px&quot;
                        /&gt;
                        &lt;a href=&quot;http://ocramius.github.com/&quot; target=&quot;_blank&quot; rel=&quot;me&quot;&gt;Marco Pivetta&lt;/a&gt;
                    &lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;span class=&quot;doctrine-color&quot;&gt;Doctrine&lt;/span&gt; core team
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;span class=&quot;zf-color&quot;&gt;Zf2&lt;/span&gt; contributor
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;span class=&quot;zf-color&quot;&gt;Modules&lt;/span&gt; &lt;strike&gt;developer&lt;/strike&gt; &lt;span class=&quot;fragment&quot;&gt;time waster&lt;/span&gt;
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;a href=&quot;http://twitter.com/Ocramius&quot; target=&quot;_blank&quot;&gt;@Ocramius&lt;/a&gt;
                        -
                        &lt;a href=&quot;http://github.com/Ocramius&quot; target=&quot;_blank&quot;&gt;Ocramius&lt;/a&gt;
                    &lt;/p&gt;
                &lt;/section&gt;
                &lt;section&gt;
                    &lt;h2&gt;Main Libraries&lt;/h2&gt;
                    &lt;p&gt;
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/bjyoungblood/BjyAuthorize&quot;&gt;BjyAuthorize&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/RWOverdijk/AssetManager&quot;&gt;AssetManager&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/BinaryKitten/ZeffMu&quot;&gt;ZeffMu&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/zf-fr/ZfrRest&quot;&gt;ZfrRest&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/Ocramius/OcraDiCompiler&quot;&gt;OcraDiCompiler&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/Ocramius/OcraServiceManager&quot;&gt;OcraServiceManager&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/Ocramius/OcraCachedViewResolver&quot;&gt;OcraCachedViewResolver&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/doctrine/DoctrineModule&quot;&gt;DoctrineModule&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/doctrine/DoctrineORMModule&quot;&gt;DoctrineORMModule&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/doctrine/DoctrineMongoODMModule&quot;&gt;DoctrineMongoODMModule&lt;/a&gt;,
                        &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/Ocramius/VersionEyeModule&quot;&gt;VersionEyeModule&lt;/a&gt;
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Doctrine Project&lt;/span&gt;&lt;/h2&gt;
                    &lt;p&gt;
                        An incubator for &lt;span class=&quot;doctrine-color&quot;&gt;persistence&lt;/span&gt;-oriented libraries
                    &lt;/p&gt;
                    &lt;p&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/d07a7a143b14fc8309f9abb78d569344?s=70&quot; alt=&quot;asm89&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/f000c9b4dd0656f60de1dc9e75f7386c?s=70&quot; alt=&quot;avalanche123&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/75f5fb3ddda052e46f1daed314ae69ab?s=70&quot; alt=&quot;beberlei&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/14327ba6a017db91465d34f5910df5ab?s=70&quot; alt=&quot;davidino&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/c9f4f8ce2c2936bacaf49500b5a127dc?s=70&quot; alt=&quot;dbu&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/847009eb569c152f194f70e2deba99e1?s=70&quot; alt=&quot;FabioBatSilva&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/f1a2c5905e121d09feba5ad73898ffca?s=70&quot; alt=&quot;fabpot&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/fbfe5a0027befc4b766f5fdc4cd530d8?s=70&quot; alt=&quot;golovanov&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/5f258a6128e0e026bf91f7ace0f85967?s=70&quot; alt=&quot;guilhermeblanco&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/f23700b51dc0c196c1dc02f84aeeecdf?s=70&quot; alt=&quot;jmikola&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/f76041410752f9019752b6afd2bebc2a?s=70&quot; alt=&quot;jwage&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/29225b18371c37ec44c7b8831ea3dae3?s=70&quot; alt=&quot;kore&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/097f39f4cd9a83a03d92c246a2797880?s=70&quot; alt=&quot;kriswallsmith&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/54787afbd0e7c30936101c2fa84bd89b?s=70&quot; alt=&quot;lsmith77&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/9f580202b05cc640aa9297ab7a1ae764?s=70&quot; alt=&quot;naderman&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/1c29f9b1bf5f1b88ed8b0c9a9be39788?s=70&quot; alt=&quot;nrk&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/3cf7a8ab0bccee5b65d39b50a170a555?s=70&quot; alt=&quot;Ocramius&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/7e1b44a243d0cd4a01e5de1fa41fc0ed?s=70&quot; alt=&quot;odino&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/ae002f3da6a8fb6714653dc49c9284b8?s=70&quot; alt=&quot;richardfullmer&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/20f4b48ecceee43353a1ec364cd0059c?s=70&quot; alt=&quot;rndstr&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/a459a18ff578f511412e9b78b1c3a7fb?s=70&quot; alt=&quot;romanb&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/96a13b96ece78afe3c2dc841edc4a8f5?s=70&quot; alt=&quot;schmittjoh&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/48b79d17cd8a911327cbd88c122b1efb?s=70&quot; alt=&quot;Seldaek&quot;/&gt;
                        &lt;img src=&quot;https://secure.gravatar.com/avatar/7894bbdf1c05b18a1444ad8c76c9d583?s=70&quot; alt=&quot;stof&quot;/&gt;
                    &lt;/p&gt;
                &lt;/section&gt;
                &lt;section&gt;
                    &lt;h2&gt;What is &lt;span class=&quot;doctrine-color&quot;&gt;Doctrine ORM&lt;/span&gt;?&lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;span class=&quot;doctrine-color&quot;&gt;Doctrine ORM&lt;/span&gt; is an Object Relational Mapper
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        It is inspired by Hibernate and the &lt;abbr title=&quot;Java Persistece API&quot;&gt;JPA&lt;/abbr&gt; (JSR-317)
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        It is based on a
                        &lt;abbr title=&quot;Database Abstraction Layer&quot; class=&quot;doctrine-color&quot;&gt;DBAL&lt;/abbr&gt;
                        (DataBase Abstraction Layer)
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Allows developers to save and load &lt;abbr title=&quot;Plain Old PHP Object&quot;&gt;POPO&lt;/abbr&gt; with SQL
                    &lt;/p&gt;

                    &lt;aside class=&quot;notes&quot;&gt;
                        Also consider that Doctrine ORM abstract the underlying SQL dialect of the DB platform you are
                        using, so it's possible for you to switch DB vendor from a day to another
                    &lt;/aside&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;p&gt;
                        An &lt;span class=&quot;doctrine-color&quot;&gt;ORM&lt;/span&gt; gives you the impression that you are working
                        with a &quot;virtual&quot; database (graph) composed by objects
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;p&gt;
                        Simply put:
                    &lt;/p&gt;
                    &lt;h2 class=&quot;doctrine-color&quot;&gt;Forget the database!&lt;/h2&gt;

                    &lt;aside class=&quot;notes&quot;&gt;
                        The job of an ORM is all about abstracting the underlying data structure into something that
                        gives the developer access to what looks like an in-memory representation of the database.
                    &lt;/aside&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;
                        The &lt;span class=&quot;zf-color&quot;&gt;Modules&lt;/span&gt;!
                    &lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;span class=&quot;zf-color&quot;&gt;DoctrineModule&lt;/span&gt;
                        &lt;br/&gt;
                        basic common functionality
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;span class=&quot;zf-color&quot;&gt;DoctrineORMModule&lt;/span&gt;
                        &lt;br/&gt;
                        ORM/SQL Connection
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        &lt;span class=&quot;zf-color&quot;&gt;DoctrineMongoODMModule&lt;/span&gt;
                        &lt;br/&gt;
                        ODM/MongoDB Connection
                    &lt;/p&gt;

                    &lt;aside class=&quot;notes&quot;&gt;
                        DoctrineModule is a set of functionality common to all ZF2-Doctrine integration layers
                    &lt;/aside&gt;
                &lt;/section&gt;

                &lt;section data-state=&quot;soothe&quot;&gt;
                    &lt;p&gt;
                        &lt;img src=&quot;http://yuml.me/diagram/scruffy;dir:TB;/class/[doctrine/common{bg:orange}]&lt;-.- [doctrine/doctrine-module{bg:green}],[doctrine/orm{bg:orange}]&lt;-.- [doctrine/doctrine-orm-module{bg:green}],[doctrine/mongodb-odm{bg:orange}]&lt;-.- [doctrine/doctrine-mongo-odm-module{bg:green}],[doctrine/doctrine-module{bg:green}]&lt;-.- [doctrine/doctrine-orm-module{bg:green}],[doctrine/doctrine-module{bg:green}]&lt;-.- [doctrine/doctrine-mongo-odm-module{bg:green}],[doctrine/common{bg:orange}]&lt;-.- [doctrine/mongodb-odm{bg:orange}],[doctrine/common{bg:orange}]&lt;-.- [doctrine/orm{bg:orange}]&quot;&gt;
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Installation!&lt;/h2&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;&lt;span class=&quot;doctrine-color&quot;&gt;php composer.phar&lt;/span&gt; require doctrine/doctrine-orm-module:&lt;span class=&quot;zf-color&quot;&gt;0.7.*&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;img src=&quot;assets/img/waiting-meme.png&quot; width=&quot;600px&quot; alt=&quot;Wait a bit&quot;/&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;img src=&quot;assets/img/successful-installation.png&quot; alt=&quot;Doctrine ORM Module successfully installed!&quot;/&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;&lt;span class=&quot;doctrine-color&quot;&gt;php composer.phar&lt;/span&gt; require zendframework/zend-developer-tools:&lt;span class=&quot;zf-color&quot;&gt;dev-master&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;img src=&quot;assets/img/waiting-meme.png&quot; width=&quot;600px&quot; alt=&quot;Wait a bit more&quot;/&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;img src=&quot;assets/img/successful-zdt-installation.png&quot; alt=&quot;ZendDeveloperTools successfully installed!&quot;/&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;cp vendor/zendframework/zend-developer-tools/config/zenddevelopertools.local.php.dist config/autoload/zdt.local.php&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h3&gt;Enabling the modules&lt;/h3&gt;
                    &lt;pre&gt;&lt;code&gt;config/application.config.php&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code contenteditable&gt;return array(
    'modules' =&gt; array(
        'ZendDeveloperTools',
        'DoctrineModule',
        'DoctrineORMModule',
        'Application',
    ),
    // [...]
);
&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;p&gt;You should see:&lt;/p&gt;
                    &lt;p&gt;
                        &lt;img src=&quot;assets/img/toolbar-preview.png&quot; alt=&quot;Successful toolbar installation&quot;/&gt;
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Write your first entity&lt;/h2&gt;
                    &lt;pre&gt;&lt;code&gt;module/Application/src/Application/Entity/User&lt;/code&gt;&lt;/pre&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;namespace Application\Entity;
use Doctrine\ORM\Mapping as ORM;
/** @ORM\Entity */
class User {
    /**
    * @ORM\Id
    * @ORM\GeneratedValue(strategy=&quot;AUTO&quot;)
    * @ORM\Column(type=&quot;integer&quot;)
    */
    protected $id;

    /** @ORM\Column(type=&quot;string&quot;) */
    protected $fullName;

    // getters/setters
}&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Configure &lt;span class=&quot;doctrine-color&quot;&gt;mappings&lt;/span&gt;&lt;/h2&gt;
                    &lt;pre&gt;&lt;code&gt;module/Application/config/module.config.php&lt;/code&gt;&lt;/pre&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;return array(
'doctrine' =&gt; array(
  'driver' =&gt; array(
    'application_entities' =&gt; array(
      'class' =&gt;'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
      'cache' =&gt; 'array',
      'paths' =&gt; array(__DIR__ . '/../src/Application/Entity')
    ),

    'orm_default' =&gt; array(
      'drivers' =&gt; array(
        'Application\Entity' =&gt; 'application_entities'
      )
))), // [...]&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;p&gt;You should see:&lt;/p&gt;
                    &lt;img src=&quot;assets/img/successful-mapping-of-user.png&quot; alt=&quot;Successful mapping of the user entity&quot;/&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Configure the &lt;span class=&quot;doctrine-color&quot;&gt;connection&lt;/span&gt;&lt;/h2&gt;
                    &lt;pre&gt;&lt;code&gt;config/autoload/doctrine.local.php&lt;/code&gt;&lt;/pre&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;return array(
  'doctrine' =&gt; array(
    'connection' =&gt; array(
      'orm_default' =&gt; array(
        'driverClass' =&gt;'Doctrine\DBAL\Driver\PDOMySql\Driver',
        'params' =&gt; array(
          'host'     =&gt; 'localhost',
          'port'     =&gt; '3306',
          'user'     =&gt; 'username',
          'password' =&gt; 'password',
          'dbname'   =&gt; 'database',
)))));&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Validate &lt;span class=&quot;doctrine-color&quot;&gt;mappings&lt;/span&gt;&lt;/h2&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;&lt;span class=&quot;zf-color&quot;&gt;./vendor/bin/doctrine-module&lt;/span&gt; &lt;span class=&quot;doctrine-color&quot;&gt;orm:validate-schema&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
                    &lt;p&gt;
                        &lt;img src=&quot;assets/img/validate-mappings.png&quot; alt=&quot;Validate schema mappings&quot;/&gt;
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Generate&lt;/span&gt; the database&lt;/h2&gt;
                    &lt;p&gt;
                        &lt;img src=&quot;assets/img/amazed-meme.gif&quot; alt=&quot;Generating databases?! WOAH!&quot;/&gt;
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;&lt;span class=&quot;zf-color&quot;&gt;./vendor/bin/doctrine-module&lt;/span&gt; &lt;span class=&quot;doctrine-color&quot;&gt;orm:schema-tool:create&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
                    &lt;p&gt;
                        &lt;img src=&quot;assets/img/database-generated-successfully.png&quot; alt=&quot;generating the database&quot;/&gt;
                    &lt;/p&gt;
                &lt;/section&gt;


                &lt;!-- add slide about mapping overview in ZDT --&gt;

                &lt;section&gt;
                    &lt;h2&gt;Test it!&lt;/h2&gt;
                    &lt;pre&gt;&lt;code&gt;module/Application/src/Application/Controller/IndexController.php&lt;/code&gt;&lt;/pre&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;public function indexAction() {
    $objectManager = $this
        -&gt;getServiceLocator()
        -&gt;get('Doctrine\ORM\EntityManager');

    $user = new \Application\Entity\User();
    $user-&gt;setFullName('Marco Pivetta');

    $objectManager-&gt;persist($user);
    $objectManager-&gt;flush();

    die(var_dump($user-&gt;getId())); // yes, I'm lazy
}&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;section&gt;
                        &lt;h2&gt;Examples&lt;/h2&gt;
                        &lt;img width=&quot;178&quot; height=&quot;238&quot; src=&quot;assets/img/down-arrow.png&quot; alt=&quot;Down arrow&quot;/&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Persisting&lt;/span&gt; an object&lt;/h3&gt;
                        &lt;pre&gt;&lt;code contenteditable&gt;$user = new User();
$user-&gt;setFullName('Marco Pivetta');

$objectManager-&gt;persist($user); // $user is now &quot;&lt;span class=&quot;doctrine-color&quot;&gt;managed&lt;/span&gt;&quot;
$objectManager-&gt;flush(); // commit changes to db

var_dump($user-&gt;getId()); // 1&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Persisting&lt;/span&gt; multiple objects&lt;/h3&gt;
                        &lt;pre&gt;&lt;code contenteditable&gt;$user1 = new User();
$user1-&gt;setFullName('Marco Pivetta');
$objectManager-&gt;persist($user1);

$user2 = new User();
$user2-&gt;setFullName('Michaël Gallego');
$objectManager-&gt;persist($user2);

$user3 = new User();
$user3-&gt;setFullName('Kyle Spraggs');
$objectManager-&gt;persist($user3);

$objectManager-&gt;flush();&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;Retrieving an object&lt;/h3&gt;
                        &lt;pre&gt;&lt;code contenteditable&gt;$user1 = $objectManager-&gt;find('Application\Entity\User', 1);

var_dump($user1-&gt;getFullName()); // Marco Pivetta

$user2 = $objectManager
    -&gt;getRepository('Application\Entity\User')
    -&gt;findOneBy(array('fullName' =&gt; 'Michaël Gallego'));

var_dump($user2-&gt;getFullName()); // Michaël Gallego&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;Updating an object&lt;/h3&gt;
                        &lt;pre&gt;&lt;code contenteditable&gt;$user = $objectManager-&gt;find('Application\Entity\User', 1);

$user-&gt;setFullName('Guilherme Blanco');

$objectManager-&gt;flush();&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;Deleting an object&lt;/h3&gt;
                        &lt;pre&gt;&lt;code contenteditable&gt;$user = $objectManager-&gt;find('Application\Entity\User', 1);

$objectManager-&gt;remove($user);

$objectManager-&gt;flush();&lt;/code&gt;&lt;/pre&gt;
                        &lt;/section&gt;
                        &lt;section&gt;
                            &lt;h3&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Associations&lt;/span&gt; - User&lt;/h3&gt;
                        &lt;pre&gt;&lt;code contenteditable&gt;/** @ORM\Entity */
class User {
    // like before

    /** @ORM\ManyToOne(targetEntity=&quot;Address&quot;) */
    protected $address;

    /** @ORM\ManyToMany(targetEntity=&quot;Project&quot;) */
    protected $projects;

    public function __construct()
    {
        $this-&gt;projects = new ArrayCollection();
    }

    // getters/setters
}&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Associations&lt;/span&gt; - Address&lt;/h3&gt;
                        &lt;pre&gt;&lt;code contenteditable&gt;/** @ORM\Entity */
class Address {
    /* @ORM\Id @ORM\Column(type=&quot;integer&quot;) @ORM\GeneratedValue(strategy=&quot;AUTO&quot;) */
    protected $id;

    /** @ORM\Column(type=&quot;string&quot;) */
    protected $city;

    /** @ORM\Column(type=&quot;string&quot;) */
    protected $country;

    // getters/setters etc.
}&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Associations&lt;/span&gt; - Projects&lt;/h3&gt;
&lt;pre&gt;&lt;code contenteditable&gt;/** @ORM\Entity */
class Project {
    /* @ORM\Id @ORM\Column(type=&quot;integer&quot;) @ORM\GeneratedValue(strategy=&quot;AUTO&quot;) */
    protected $id;

    /** @ORM\Column(type=&quot;string&quot;) */
    protected $name;

    // getters/setters
}&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Associations&lt;/span&gt; - Persisting associations&lt;/h3&gt;
&lt;pre&gt;&lt;code contenteditable&gt;$user = new User();
$user-&gt;setFullName('Marco Pivetta');
$objectManager-&gt;persist($user);

$address = new Address();
$address-&gt;setCity('Frankfurt')
$address-&gt;setCountry('Germany');
$objectManager-&gt;persist($address);

$project = new Project();
$project-&gt;setName('Doctrine ORM');
$objectManager-&gt;persist($project);

$user-&gt;setAddress($address);
$user-&gt;getProjects()-&gt;add($project);
$objectManager-&gt;flush();&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;
                    &lt;section&gt;
                        &lt;h3&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Associations&lt;/span&gt; - Retrieving associations&lt;/h3&gt;
&lt;pre&gt;&lt;code contenteditable&gt;$user = $objectManager-&gt;find('Application\Entity\User', 1);

var_dump($user-&gt;getAddress()-&gt;getCity()); // Frankfurt
var_dump($user-&gt;getProjects()-&gt;first()-&gt;getName()) // Doctrine ORM&lt;/code&gt;&lt;/pre&gt;
                    &lt;/section&gt;

                    &lt;section&gt;
                        &lt;p&gt;
                            More tutorials at
                            &lt;a href=&quot;http://marco-pivetta.com/doctrine2-orm-tutorial&quot; target=&quot;_blank&quot; title=&quot;Doctrine 2 ORM Tutorial&quot;&gt;
                                http://marco-pivetta.com/doctrine2-orm-tutorial
                            &lt;/a&gt;
                        &lt;/p&gt;
                        &lt;p&gt;
                            &lt;img
                                src=&quot;assets/img/yo-dawg-presentation-in-presentation.jpg&quot;
                                alt=&quot;Yo Dawg, I heard you like presentations, so I've put a presentation in your presentation&quot;
                            /&gt;
                        &lt;/p&gt;
                    &lt;/section&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;zf-color&quot;&gt;DoctrineModule&lt;/span&gt; goodies&lt;/h2&gt;
                &lt;/section&gt;

                &lt;section data-state=&quot;soothe&quot;&gt;
                    &lt;h2&gt;&lt;span class=&quot;doctrine-color&quot;&gt;&lt;abbr title=&quot;Enhanced entity-relationship&quot;&gt;EER&lt;/abbr&gt; UML model&lt;/span&gt;&lt;/h2&gt;
                    &lt;p&gt;
                        See what your entities look like in a graph:
                    &lt;/p&gt;
                    &lt;p&gt;
                        &lt;img src=&quot;assets/img/sample-eer-diagram.png&quot; alt=&quot;Example EER UML diagram generated by DoctrineORMModule&quot;/&gt;
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;zf-color&quot;&gt;Paginator&lt;/span&gt; Adapter&lt;/h2&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;use Doctrine\Common\Collections\ArrayCollection;
use DoctrineModule\Paginator\Adapter\Collection as Adapter;
use Zend\Paginator\Paginator;

// Create a Doctrine Collection
$collection = new ArrayCollection(range(1, 101));

// Create the paginator itself
$paginator = new Paginator(new Adapter($collection));

$paginator
    -&gt;setCurrentPageNumber(1)
    -&gt;setItemCountPerPage(5);&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;
                        &lt;span class=&quot;zf-color&quot;&gt;Paginator&lt;/span&gt; Adapter
                        (&lt;span class=&quot;doctrine-color&quot;&gt;ORM&lt;/span&gt;)
                    &lt;/h2&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;use DoctrineORMModule\Paginator\Adapter\DoctrinePaginator;
use Doctrine\ORM\Tools\Pagination\Paginator as ORMPaginator;
use Zend\Paginator\Paginator;

// Create a Doctrine Collection
$query = $em-&gt;createQuery('SELECT f FROM Foo f JOIN f.bar b');

// Create the paginator itself
$paginator = new Paginator(
    new DoctrinePaginator(new ORMPaginator($query))
);

$paginator
    -&gt;setCurrentPageNumber(1)
    -&gt;setItemCountPerPage(5);&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

            &lt;section&gt;
                &lt;h2&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Object-Exists&lt;/span&gt; &lt;span class=&quot;zf-color&quot;&gt;Validator&lt;/span&gt;&lt;/h2&gt;
                &lt;pre&gt;&lt;code contenteditable&gt;$repository = $objectManager
    -&gt;getRepository('Application\Entity\User');

$validator = new \DoctrineModule\Validator\ObjectExists(array(
    'object_repository' =&gt; $repository,
    'fields' =&gt; array('email')
));

var_dump($validator-&gt;isValid('test@example.com'));
var_dump($validator-&gt;isValid(array(
    'email' =&gt; 'test@example.com'
)));&lt;/code&gt;&lt;/pre&gt;
            &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;zf-color&quot;&gt;Cache&lt;/span&gt; adapters&lt;/h2&gt;
                &lt;pre&gt;&lt;code contenteditable&gt;$zendCache = new \Zend\Cache\Storage\Adapter\Memory();

$cache = new \DoctrineModule\Cache\ZendStorageCache($zendCache);&lt;/code&gt;&lt;/pre&gt;
                &lt;pre&gt;&lt;code contenteditable&gt;$doctrineCache = new \Doctrine\Common\Cache\ArrayCache();
$options = new \Zend\Cache\Storage\Adapter\AdapterOptions();

$cache = new \DoctrineModule\Cache\DoctrineCacheStorage(
    $options,
    $doctrineCache
);&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;zf-color&quot;&gt;Hydrator&lt;/span&gt;&lt;/h2&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;use DoctrineModule\Stdlib\Hydrator\DoctrineObject;

$hydrator = new DoctrineObject(
    $objectManager,
    'Application\Entity\City'
);

$city = new City();
$data = array('name' =&gt; 'Frankfurt');

$city = $hydrator-&gt;hydrate($data, $city);

echo $city-&gt;getName(); // prints &quot;Frankfurt&quot;

$dataArray = $hydrator-&gt;extract($city);
echo $dataArray['name']; // prints &quot;Frankfurt&quot;&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

            &lt;section&gt;
                &lt;h2&gt;&lt;span class=&quot;zf-color&quot;&gt;Hydrator&lt;/span&gt; (2)&lt;/h2&gt;
                &lt;pre&gt;&lt;code contenteditable&gt;use DoctrineModule\Stdlib\Hydrator\DoctrineObject;

$hydrator = new DoctrineObject(
    $objectManager,
    'Application\Entity\City'
);

$city = new City();
$data = array('country' =&gt; 123);

$city = $hydrator-&gt;hydrate($data, $city);

var_dump($city-&gt;getCountry());
// prints class Country#1 (1) {
//   protected $name =&gt; string(5) &quot;Germany&quot;
// }&lt;/code&gt;&lt;/pre&gt;
            &lt;/section&gt;

            &lt;section&gt;
                &lt;h2&gt;&lt;span class=&quot;zf-color&quot;&gt;Form Element&lt;/span&gt;&lt;/h2&gt;
            &lt;pre&gt;&lt;code contenteditable&gt;$form-&gt;add(array(
    'type' =&gt; 'DoctrineModule\Form\Element\ObjectSelect',
    'name' =&gt; 'user',
    'options' =&gt; array(
        'object_manager' =&gt; $objectManager,
        'target_class'   =&gt; 'Module\Entity\User',
        'property'       =&gt; 'fullName',
        'is_method'      =&gt; true,
        'find_method'    =&gt; array(
            'name'   =&gt; 'findBy',
            'params' =&gt; array(
                'criteria' =&gt; array('active' =&gt; 1),
                'orderBy'  =&gt; array('lastName' =&gt; 'ASC'),
            ),
        ),
    ),
));&lt;/code&gt;&lt;/pre&gt;
            &lt;/section&gt;

            &lt;section&gt;
                &lt;h2&gt;More stuff!&lt;/h2&gt;
                &lt;p class=&quot;fragment&quot;&gt;Everything works with &lt;span class=&quot;doctrine-color&quot;&gt;MongoDB ODM&lt;/span&gt; too!&lt;/p&gt;
                &lt;p class=&quot;fragment&quot;&gt;&lt;span class=&quot;doctrine-color&quot;&gt;CouchDB ODM&lt;/span&gt;/&lt;span class=&quot;doctrine-color&quot;&gt;PHPCR ODM&lt;/span&gt;/&lt;span class=&quot;doctrine-color&quot;&gt;OrientDB ODM&lt;/span&gt;&lt;/p&gt;
            &lt;/section&gt;

            &lt;section&gt;
                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;zf-color&quot;&gt;Good Practices&lt;/span&gt;&lt;/h2&gt;
                    &lt;img width=&quot;178&quot; height=&quot;238&quot; src=&quot;assets/img/down-arrow.png&quot; alt=&quot;Down arrow&quot;/&gt;
                &lt;/section&gt;
                &lt;section&gt;
                    &lt;h2&gt;Keep &lt;span class=&quot;doctrine-color&quot;&gt;Entities&lt;/span&gt; simple&lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;Think of entities as value-objects&lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;Don't add logic to entities (hard to change later!)&lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;Keep entities aware only of themselves + relations&lt;/p&gt;
                &lt;/section&gt;
                &lt;section&gt;
                    &lt;h2&gt;Use &lt;span class=&quot;doctrine-color&quot;&gt;doctrine/common&lt;/span&gt; API&lt;/h2&gt;
                    &lt;p&gt;
                        If you stick with using only &lt;span class=&quot;doctrine-color&quot;&gt;doctrine/common&lt;/span&gt; API,
                        users of your modules can switch between &lt;span class=&quot;doctrine-color&quot;&gt;ORM&lt;/span&gt;/
                        &lt;span class=&quot;doctrine-color&quot;&gt;MongoDB ODM&lt;/span&gt;/&lt;span class=&quot;doctrine-color&quot;&gt;CouchDB ODM&lt;/span&gt;/
                        &lt;span class=&quot;doctrine-color&quot;&gt;PHPCR ODM&lt;/span&gt;/&lt;span class=&quot;doctrine-color&quot;&gt;OrientDB ODM&lt;/span&gt;
                    &lt;/p&gt;
                &lt;/section&gt;
                &lt;section&gt;
                    &lt;h2&gt;Use &lt;span class=&quot;doctrine-color&quot;&gt;doctrine/common&lt;/span&gt; API&lt;/h2&gt;
                    &lt;p&gt;Prefer&lt;/p&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;Doctrine\Common\Persistence\ObjectManager&lt;/code&gt;&lt;/pre&gt;
                    &lt;p&gt;over&lt;/p&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;Doctrine\ORM\EntityManager&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;
                &lt;section&gt;
                    &lt;h2&gt;Use &lt;span class=&quot;doctrine-color&quot;&gt;doctrine/common&lt;/span&gt; API&lt;/h2&gt;
                    &lt;p&gt;Prefer&lt;/p&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;Doctrine\Common\Persistence\ObjectRepository&lt;/code&gt;&lt;/pre&gt;
                    &lt;p&gt;over&lt;/p&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;Doctrine\ORM\EntityRepository&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Use &lt;span class=&quot;doctrine-color&quot;&gt;collections&lt;/span&gt; extensively&lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Doctrine comes with a powerful &lt;span class=&quot;doctrine-color&quot;&gt;collections&lt;/span&gt;
                        &lt;a href=&quot;https://github.com/doctrine/collections&quot; target=&quot;_blank&quot;&gt;API&lt;/a&gt;
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        OOP API for array-like data structures
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Use the &lt;span class=&quot;doctrine-color&quot;&gt;Criteria API&lt;/span&gt;&lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Collections provide a &lt;span class=&quot;doctrine-color&quot;&gt;Criteria&lt;/span&gt;
                        &lt;a href=&quot;https://github.com/doctrine/collections/blob/v1.0/lib/Doctrine/Common/Collections/Criteria.php&quot; target=&quot;_blank&quot;&gt;API&lt;/a&gt;
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Allows you to filter virtually any kind of data structure
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Criteria API&lt;/span&gt; example&lt;/h2&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;use Doctrine\Common\Collections\Criteria;
use Doctrine\Common\Collections\ArrayCollection;

$collection = new ArrayCollection(array($user1, $user2, $user3));
$criteria   = new Criteria();
$criteria-&gt;andWhere(
    $criteria-&gt;expr()-&gt;gt(
        'lastLogin',
        new \DateTime('-1 day')
    )
);

$recentVisitors = $collection-&gt;matching($criteria);&lt;/code&gt;&lt;/pre&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;$recentVisitors = $em
    -&gt;getRepository('Application\Entity\Users')
    -&gt;matching($criteria);&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;&lt;span class=&quot;doctrine-color&quot;&gt;Criteria API&lt;/span&gt; advantages&lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Works in &lt;span class=&quot;doctrine-color&quot;&gt;ORM Repositories&lt;/span&gt;,
                        &lt;span class=&quot;doctrine-color&quot;&gt;Collections&lt;/span&gt;, etc...
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Abstracts the problem of &quot;searching&quot;
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Same criteria for different storages (ORM, ODM, Memory, ElasticSearch, cache...)
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Allows you to define your own &lt;code&gt;RecentUsersCriteria&lt;/code&gt; or &lt;code&gt;InactiveUsersCriteria&lt;/code&gt;...
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Inject the &lt;span class=&quot;doctrine-color&quot;&gt;Object Manager&lt;/span&gt;&lt;/h2&gt;
                    &lt;p&gt;
                        If you fetch the entity manager from within your services, replacing it will become very hard:
                        Inject it instead!
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Inject the &lt;span class=&quot;doctrine-color&quot;&gt;Object Manager&lt;/span&gt;&lt;/h2&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;'factories' =&gt; array(
    'my_service' =&gt; function ($sl) {
        $objectManager = $sl-&gt;get('Doctrine\ORM\EntityManager');
        return new MyService($objectManager);
    }
),&lt;/code&gt;&lt;/pre&gt;
                    &lt;pre&gt;&lt;code contenteditable&gt;class MyService
{
    public function __construct(ObjectManager $objectManager)
    {
        // [...]
    }
}&lt;/code&gt;&lt;/pre&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Keep &lt;span class=&quot;doctrine-color&quot;&gt;Object Manager&lt;/span&gt; out of &lt;span class=&quot;zf-color&quot;&gt;Controllers&lt;/span&gt;&lt;/h2&gt;
                    &lt;p&gt;
                        &lt;img
                            src=&quot;assets/img/if-you-inject-objectmanager-in-your-controllers.jpg&quot;
                            alt=&quot;If you inject ObjectManager in your controllers, you're gonna have a bad architecture&quot;
                        /&gt;
                    &lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Don't use &lt;span class=&quot;doctrine-color&quot;&gt;persistence&lt;/span&gt; to solve &lt;span class=&quot;zf-color&quot;&gt;application&lt;/span&gt; problems&lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;Filtering data when saved to DB&lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;Validating data when saved to DB&lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;Saving files when records are saved to DB&lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;Using DB-level errors to check input validity&lt;/p&gt;
                &lt;/section&gt;

                &lt;section&gt;
                    &lt;h2&gt;Keep your &lt;span class=&quot;doctrine-color&quot;&gt;object graph&lt;/span&gt; consistent&lt;/h2&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        An &lt;span class=&quot;doctrine-color&quot;&gt;ObjectManager&lt;/span&gt; works under the assumption that managed
                        objects are valid!
                    &lt;/p&gt;
                    &lt;p class=&quot;fragment&quot;&gt;
                        Assign values to your entities only when data is valid!
                    &lt;/p&gt;
                &lt;/section&gt;
            &lt;/section&gt;

            &lt;section&gt;
                &lt;h2&gt;Questions?&lt;/h2&gt;
            &lt;/section&gt;

            &lt;section&gt;
                &lt;h2&gt;Fork it!&lt;/h2&gt;
                &lt;p&gt;
                    You can find these slides on GitHub at
                    &lt;a href=&quot;https://github.com/Ocramius/doctrine-orm-zf2-tutorial&quot; target=&quot;_blank&quot;&gt;
                        https://github.com/Ocramius/doctrine-orm-zf2-tutorial
                    &lt;/a&gt;
                &lt;/p&gt;
            &lt;/section&gt;

            &lt;section&gt;
                &lt;h2&gt;Thanks for watching!&lt;/h2&gt;
            &lt;/section&gt;

            &lt;/div&gt;

        &lt;/div&gt;

</content>
    </entry>
    
    <entry>
        <title>There is a Module for that</title>
        <link href="http://hounddog.github.com/blog/there-is-a-module-for-that"/>
        <updated>2012-11-30T00:00:00+01:00</updated>
        <id>http://hounddog.github.com/blog/there-is-a-module-for-that</id>
        <content type="html">&lt;div class=&quot;row&quot;&gt;
    &lt;p&gt;This is a blog post greatly inspired by a slide that I have found created by Christophe Coevet, his slide can be found &lt;a href=&quot;http://friendsofsymfony.github.com/slides/there_is_a_bundle_for_that.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

    &lt;p&gt;I spend a lot of my time on #zftalk freenode.net helping people to solve their problems or just chatting away. One of the things I am noticing every day is that people despite our tries to help them keep building their own &quot;custom&quot; modules. Why? I mean a very simple example for this is ZfcUser. Every day I see someone asking about authentication problem or how to create a login or even acl. When we tell them there is a module existing we get the most diverse answers to this.&lt;/p&gt;

    &lt;p&gt; Some of these answers are:&lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;I would need to learn this module&lt;/li&gt;
        &lt;li&gt;I need a customized solution&lt;/li&gt;
        &lt;li&gt;I want to learn how the system works&lt;/li&gt;
        &lt;li&gt;I just need something simple&lt;/li&gt;
        &lt;li&gt;My boss does not pay me to learn/fix someone elses module&lt;/li&gt;
    &lt;/ul&gt;
    &lt;p&gt;Let's just take a look at some of these answers.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;I Would need to learn this module.&lt;/strong&gt; Yes, i absolutely agree but even if you build your own solution don't you have to invest time and effort also to make it do what you want? Lot of people who answered this are also learning Zend Framework 2 but I see none of them building their own framework.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;I need a customized solution.&lt;/strong&gt; This is mostly with reference to ZfcUser. I agree this module is not perfect but mostly it fits every need I can think of. It has been designed with scalability in mind so you can just change your form the way you require it or adapt your database to hold new information. If it still does not support the required feature you can also modify it and submit a pr to make it a better module.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;I want to learn how the system works.&lt;/strong&gt; No arguments against that but why learn how to build something that is existing? Why not try and build your own application in a fast way. Having an application up and running in no time gives me the greatest learning experience as I have this nice and cozy feeling when I see what I have accomplished in a short time instead of wasting hours trying to build something which is existing.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;I just need something simple.&lt;/strong&gt; Again... Most modules are designed with scalability in mind and mostly just solve the most basic use cases by default. What could be simpler?&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;My boss does not pay me to learn/fix someone elses module.&lt;/strong&gt;  I don't know about you, but my boss also does not pay to sit around and build something which exists. My boss wants results and that as fast as possible. If I can show my boss that instead of building our own solution we can use some module and modify it to our needs which might take less time or even the same and justifying it by explaining that this has been tested by many people out of the community, he hardly never says no.&lt;/p&gt;

    &lt;p&gt;Let's be honest, you or I might be thinking that we are the greatest programmers in the world but there is always someone better out there or someone who has some genius idea. Use the power of this great community, most of us are more then willing to help you find your module or even build one together with you if it does not exist.&lt;/p&gt;

    &lt;p&gt; The time of sitting alone and grumbling how the module could be made reusable is over. Invest your time to find a suitable module or even discuss with people on how to create a module that can be useful to the community. I personally cannot think of a greater feeling when someone comes and tells me &quot;hey I used your module and it just took me a few minutes to get up and running&quot;. Having helped myself and someone else by creating a reusable module is more then I could ask for.&lt;/p&gt;

    &lt;p&gt;This brings me to another point. As I am currently building the &lt;a href=&quot;http://modules.zendframework.com&quot;&gt;modules.zendframework.com&lt;/a&gt; website I mostly also observe every module that get's submitted there. It's really great to see all these contributions and new modules popping up on a daily basis. Again, check first if a module is existing. I see a lot of modules solving problems which others already have.&lt;/p&gt;

    &lt;h1&gt;Search before you create a module!!!&lt;/h1&gt;

    &lt;h1&gt;Flexibility of Modules and how to override them&lt;/h1&gt;

&lt;p&gt;You can nearly override anything with in a module from views to controller over services and mappers&lt;/p&gt;
&lt;p&gt;Create your own module which can extend/modify the original module. All you need to do is register it after the original Module in &lt;code&gt;application.config.php&lt;/code&gt;&lt;/p&gt;

&lt;pre class=&quot;prettyprint lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    'modules' =&gt; array(
        'OriginalModule',
        'MyModule',//this will override OriginalModule with any custom configurations you require
    ),
    'module_listener_options' =&gt; array(
        'config_glob_paths'    =&gt; array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' =&gt; array(
            './module',
            './vendor',
        ),
    ),
);
&lt;/pre&gt;
    &lt;h2&gt;Override a template&lt;/h2&gt;
    &lt;p&gt; create the same view structure as the OriginalModule and place your custom templates there. Example:&lt;/p&gt;

    &lt;h3&gt;OriginalModule&lt;/h3&gt;
&lt;pre class=&quot;prettyprint lang-prepro&quot;&gt;
Config:
'view_manager' =&gt; array(
    'template_path_stack' =&gt; array(
        __DIR__ . '/../view',
    ),
),

Folder Structure:
view/
    index/
        index/
            index.phtml
&lt;/pre&gt;

&lt;h3&gt;MyModule&lt;/h3&gt;
&lt;pre class=&quot;prettyprint lang-prepro&quot;&gt;
Config:
'view_manager' =&gt; array(
    'template_path_stack' =&gt; array(
        __DIR__ . '/../view',
    ),
),

Folder Structure:
view/
    index/
        index/
            index.phtml //Overrides the Original index.phtml with our custom code
&lt;/pre&gt;

&lt;h3&gt;Override a Controller/Service&lt;/h3&gt;

&lt;p&gt; Mostly all controllers and services are registered with the servicemanager and can be overriden bey they key&lt;/p&gt;

&lt;h3&gt;OriginalModule&lt;/h3&gt;

&lt;pre class=&quot;prettyprint lang-prepro&quot;&gt;
'controllers' =&gt; array(
    'invokables' =&gt; array(
        'Application\Controller\Index' =&gt; 'Application\Controller\IndexController',
    ),
),
&lt;/pre&gt;

&lt;h3&gt;MyModule&lt;/h3&gt;
&lt;pre class=&quot;prettyprint lang-prepro&quot;&gt;
'controllers' =&gt; array(
    'invokables' =&gt; array(
        'Application\Controller\Index' =&gt; 'MyModule\Controller\IndexController',
    ),
),
&lt;/pre&gt;

&lt;p&gt;Just by assigning my Custom controller to the Key &lt;code&gt;Application\Controller\Index&lt;/code&gt; i have now replaced it. Same goes for the services or anything else that was configured using the service configuration&lt;/p&gt;

&lt;h3&gt;Extending Forms in ZfcUser&lt;/h3&gt;
&lt;p&gt;I am taking this as an example as there is a nice way of extending forms in ZfcUser just by using an event.&lt;/p&gt;
&lt;p&gt;Just place the following code as also explained in the wiki into your Module.php&lt;/p&gt;
&lt;pre class=&quot;prettyprint lang-prepro&quot;&gt;
public function onBootstrap($e)
{
    $events = $e-&gt;getApplication()-&gt;getEventManager()-&gt;getSharedManager();
    $events-&gt;attach('ZfcUser\Form\Register','init', function($e) {
        $form = $e-&gt;getTarget();
        // Do what you please with the form instance ($form)
    });
    $events-&gt;attach('ZfcUser\Form\RegisterFilter','init', function($e) {
        $filter = $e-&gt;getTarget();
        // Do what you please with the filter instance ($filter)
    });
}
&lt;/pre&gt;
&lt;p&gt;As you can see you can attach anything to the formobject here and modify it to do exactly what you require&lt;/p&gt;

&lt;p&gt;If you are unsure on how to contribute, you can come and ask us on irc #zftalk and most people will be more then willing to help. Furthermore just get started by forking existing modules on github and submit a pr&lt;/p&gt;

&lt;p&gt;I hope that you are going to think of this post in the future and will keep in mind the essence of it &lt;code&gt;There is a module for that&lt;/code&gt; and if not, create one that can be used by the community. I hope you enjoyed reading this and hope to see you soon creating and contributing to existing modules. So long!&lt;/p&gt;

&lt;!--
&lt;h2&gt;Composer&lt;/h2&gt;
    &lt;ul&gt;
        &lt;li&gt;Default dependency management as of Zend Framework 2&lt;/li&gt;
        &lt;li&gt;Modules should be registered on Packagist&lt;/li&gt;
        &lt;li&gt;Use Packagist to create your own composer index&lt;/li&gt;
        &lt;li&gt;Make sure to enable the &quot;Packagist&quot; commit hook&lt;/li&gt;
    &lt;/ul&gt;
&lt;pre&gt;
{
    &quot;name&quot;: &quot;acme/my-bundle&quot;,
    &quot;type&quot;: &quot;zend-framework-module&quot;,
    &quot;description&quot;: &quot;This Module is an example&quot;,
    &quot;license&quot;: &quot;MIT&quot;,
    &quot;authors&quot;: [
        {
            &quot;name&quot;: &quot;Duffy Duck&quot;,
            &quot;email&quot;: &quot;diffy@acme.com&quot;
        }
    ],
    &quot;require&quot;: {
        &quot;php&quot;:                      &quot;&gt;=5.3.3&quot;,
        &quot;zendframework/zf2&quot;: &quot;&gt;=2.0&quot;,
    }
}
&lt;/pre&gt;

    &lt;h2&gt;Create Tests for your modules with travis.ci&lt;/h2&gt;
    &lt;p&gt;Create a &lt;code&gt;travis.yml&lt;/code&gt; file and enable github hooks to run tests automatically.&lt;/p&gt;
&lt;pre&gt;
language: php
php:
  - &quot;5.3&quot;

before_script:
- cd ..
- git clone git://github.com/zendframework/ZendSkeletonApplication.git
- cd ZendSkeletonApplication
- php composer.phar self-update
- php composer.phar install --dev
- cp -r ../MyModule module/MyModule
- cd vendor/MyModule
- wget http://cs.sensiolabs.org/get/php-cs-fixer.phar

script:
  - phpunit
  - php coverage-checker.php clover.xml 76
  - output=$(php php-cs-fixer.phar fix -v --dry-run --level=psr2 .); if [[ $output ]]; then while read -r line; do echo -e &quot;\e[00;31m$line\e[00m&quot;; done &lt;&lt;&lt; &quot;$output&quot;; false; fi;
&lt;/pre&gt;
--&gt;

&lt;p&gt;If you need to write your own module or are looking for some usefull tips on writing better modules have a look at Michaël Gallego's blog for &lt;a href=&quot;http://www.michaelgallego.fr/blog/2013/01/21/some-tips-to-write-better-zend-framework-2-modules/&quot; target=&quot;blank&quot;&gt;writing better Zend Framework 2 Modules&lt;/a&gt;.
&lt;/div&gt;-</content>
    </entry>
    
    <entry>
        <title>Improving Performance in Zend Framework 2</title>
        <link href="http://hounddog.github.com/blog/performance-in-zend-framework-2"/>
        <updated>2012-11-18T00:00:00+01:00</updated>
        <id>http://hounddog.github.com/blog/performance-in-zend-framework-2</id>
        <content type="html">&lt;div class=&quot;row&quot;&gt;
    &lt;p&gt;
        I am going to list options here on how to improve the Performance. This will be an ongoing list which i will keep updated while doing performance improvements.
    &lt;/p&gt;
    &lt;h1&gt;Autoloader Classmap&lt;/h1&gt;
    &lt;p&gt;As described by Rob Allen on his &lt;a href=&quot;http://akrabat.com/zend-framework-2/using-zendloaderautoloader/&quot; target=&quot;_blank&quot;&gt;Blog&lt;/a&gt;.&lt;/p&gt;
    &lt;pre&gt;
The class map autoloader is a high performance autoloader. It uses class maps, which are simply associative arrays of each classname to the name of the file disk that contains that class.
    &lt;/pre&gt;
    This is a very simple process and takes just a few minutes to generate and include the classmaps for each module you have created.
    &lt;h2&gt;Create Classmaps&lt;/h2&gt;
    &lt;pre&gt;
As you can imagine, creating class maps manually would quickly get tiresome. To alleviate this, Zend Framework 2 provides a PHP script, classmap_generator.php in the `bin` directory that will do this for you. This tool will scan the entire directory from the current directory (or that specified via an option) and create a class map file for every class that it finds. It is used like this:

prompt&gt; path/to/zf2/bin/classmap_generator.php -w
Creating class file map for library in '/var/www/project/library'...
Wrote classmap file to '/var/www/project/library/autoload_classmap.php'
    &lt;/pre&gt;

    &lt;h1&gt;Template Map&lt;/h1&gt;
    &lt;p&gt;Most people use the 'template_path_stack' during development. As pointed out by the &lt;a href=&quot;http://framework.zend.com/manual/2.0/en/modules/zend.view.quick-start.html#configuration&quot;&gt;manual&lt;/a&gt;, this can introduce a performance expense.
    &lt;/p&gt;
    &lt;pre&gt;
This is a nice solution for rapid application
development, but potentially introduces performance expense in
production due to the number of stat calls necessary.
    &lt;/pre&gt;
    &lt;p&gt;Once development is completed, consider putting your view's into the template_map as described in the manual.&lt;/p&gt;

    &lt;p&gt;I have now created a templatemap_generator to be found in my &lt;a href=&quot;https://gist.github.com/4169214&quot;&gt;Gist&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;Run this script from the root of your module example &lt;code&gt;module/Album&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;
$ php ../../vendor/ZF2/bin/templatemap_generator.php
Creating template file map for library in 'zf2-tutorial/module/Album'...
Wrote templatemap file to 'zf2-tutorial/module/Album/template_map.php'
&lt;/pre&gt;

    &lt;p&gt;You can then just include this file in your &lt;code&gt;module.config.php&lt;/code&gt; as following:&lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    'view_manager' =&gt; array(
        'template_map' =&gt; include __DIR__  .'/../template_map.php',
    ),
);
&lt;/pre&gt;
    &lt;p&gt;You may also include &lt;a href=&quot;https://github.com/Ocramius/OcraCachedViewResolver&quot; target=&quot;_blank&quot;&gt;OcraCachedViewResolver&lt;/a&gt; to handle template resolving performance through caching instead.&lt;/p&gt;
&lt;h1&gt;Module Config Cache&lt;/h1&gt;
    &lt;p&gt;As pointed out by Bakura we should also add a module config cache.&lt;/p&gt;
    &lt;p&gt;Create a &lt;code&gt;modulecache.local.php&lt;/code&gt; file in &lt;code&gt;config/autoload&lt;/code&gt; as follows.
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    // Whether or not to enable a configuration cache.
    // If enabled, the merged configuration will be cached and used in
    // subsequent requests.
    'config_cache_enabled' =&gt; true,
    // The key used to create the configuration cache file name.
    'config_cache_key' =&gt; 'module_config_cache',
    // The path in which to cache merged configuration.
    'cache_dir' =&gt;  './data/cache',
);
 &lt;/pre&gt;

&lt;/pre&gt;
    &lt;p&gt;This is just a quick write up and i will continue to update this with more options. If you feel anything is missing or should be mentioned, please do not hesitate to comment so i can keep this list updated. Thanks for reading!&lt;/p&gt;
&lt;/div&gt;</content>
    </entry>
    
    <entry>
        <title>Getting Started with REST and Zend Framework 2</title>
        <link href="http://hounddog.github.com/blog/getting-started-with-rest-and-zend-framework-2"/>
        <updated>2012-11-10T00:00:00+01:00</updated>
        <id>http://hounddog.github.com/blog/getting-started-with-rest-and-zend-framework-2</id>
        <content type="html">&lt;div class=&quot;row&quot;&gt;
    &lt;p&gt;
        Today i want to show you how to build a rest application. This tutorials assume you have completed the &lt;a href=&quot;http://zf2.readthedocs.org/en/latest/user-guide/overview.html&quot;&gt;Getting Started&lt;/a&gt;. I will be repeating lot of the steps allready explained in there. There is also a sample Album module which you can install from &lt;a href=&quot;https://github.com/Hounddog/Album&quot;&gt;here&lt;/a&gt;.
    &lt;/p&gt;
    &lt;h1&gt;
        Setting up the AlbumRest module
    &lt;/h1&gt;
    &lt;p&gt;
        Start by creating a directory called &lt;code&gt;AlbumRest&lt;/code&gt; under module with the following subdirectories to hold the module’s files:
    &lt;/p&gt;
    &lt;pre&gt;
    zf2-tutorial/
        /module
            /AlbumRest
                /config
                /src
                    /AlbumRest
                        /Controller
                /test
    &lt;/pre&gt;

    &lt;p&gt;
        Create &lt;code&gt;Module.php&lt;/code&gt; in the AlbumRest module at &lt;code&gt;zf2-tutorial/module/AlbumRest&lt;/code&gt;:
    &lt;/p&gt;
    &lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
namespace AlbumRest;

class Module
{
    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\ClassMapAutoloader' =&amp;gt; array(
                __DIR__ . '/autoload_classmap.php',
            ),
            'Zend\Loader\StandardAutoloader' =&amp;gt; array(
                'namespaces' =&amp;gt; array(
                    __NAMESPACE__ =&amp;gt; __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }
}
&lt;/pre&gt;

    &lt;h1&gt;
        Configuration
    &lt;/h1&gt;
    &lt;p&gt;
        Create a file called &lt;code&gt;module.config.php&lt;/code&gt; under &lt;code&gt;zf2-tutorial/module/AlbumRest/config&lt;/code&gt;:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    'controllers' =&amp;gt; array(
        'invokables' =&amp;gt; array(
            'AlbumRest\Controller\AlbumRest' =&amp;gt; 'AlbumRest\Controller\AlbumRestController',
        ),
    ),
    'view_manager' =&amp;gt; array(
        'template_path_stack' =&amp;gt; array(
            'album-rest' =&amp;gt; __DIR__ . '/../view',
        ),
    ),
);
&lt;/pre&gt;

    &lt;p&gt;
        As we are in development, we don’t need to load files via the classmap, so we provide an empty array for the classmap autoloader. Create a file called &lt;code&gt;autoload_classmap.php&lt;/code&gt; under &lt;code&gt;zf2-tutorial/module/AlbumRest&lt;/code&gt;:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array();
&lt;/pre&gt;

    &lt;h1&gt;
        Informing the application about our new module
    &lt;/h1&gt;
    &lt;p&gt;
        We now need to tell the ModuleManager that this new module exists. This is done in the application’s &lt;code&gt;config/application.config.php&lt;/code&gt; file which is provided by the skeleton application. Update this file so that its modules section contains the AlbumRest module as well, so the file now looks like this:
    &lt;/p&gt;
    &lt;p&gt;
        (Changes required are highlighted using comments.)
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    'modules' =&amp;gt; array(
        'Application',
        'Album',
        'AlbumRest',              // &amp;lt;-- Add this line
    ),
    'module_listener_options' =&amp;gt; array(
        'config_glob_paths'    =&amp;gt; array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' =&amp;gt; array(
            './module',
            './vendor',
        ),
    ),
);
&lt;/pre&gt;

    &lt;p&gt;
        As you can see, we have added our &lt;code&gt;AlbumRest&lt;/code&gt; module into the list of modules after the &lt;code&gt;Album&lt;/code&gt; module.
    &lt;/p&gt;
    &lt;p&gt;
        We have now set up the module ready for putting our custom code into it.
    &lt;/p&gt;
    &lt;h1&gt;
        Setup Rest Routing
    &lt;/h1&gt;We need to first add our custom REST routing so we are able to call the RestController. This is the updated &lt;code&gt;module.config.php&lt;/code&gt; with the new code highlighted.
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    'controllers' =&amp;gt; array(
        'invokables' =&amp;gt; array(
            'AlbumRest\Controller\AlbumRest' =&amp;gt; 'AlbumRest\Controller\AlbumRestController',
        ),
    ),

    // The following section is new and should be added to your file
    'router' =&amp;gt; array(
        'routes' =&amp;gt; array(
            'album-rest' =&amp;gt; array(
                'type'    =&amp;gt; 'segment',
                'options' =&amp;gt; array(
                    'route'    =&amp;gt; '/album-rest[/:id]',
                    'constraints' =&amp;gt; array(
                        'id'     =&amp;gt; '[0-9]+',
                    ),
                    'defaults' =&amp;gt; array(
                        'controller' =&amp;gt; 'AlbumRest\Controller\AlbumRest',
                    ),
                ),
            ),
        ),
    ),

    'view_manager' =&amp;gt; array(
        'template_path_stack' =&amp;gt; array(
            'album-rest' =&amp;gt; __DIR__ . '/../view',
        ),
    ),
);
&lt;/pre&gt;
    &lt;p&gt;
        The name of the route is &lt;code&gt;album-rest&lt;/code&gt; and has a type of &lt;code&gt;segment&lt;/code&gt;. For a RestController we must provide a placeholder in this case the route is &lt;code&gt;/album-rest/id&lt;/code&gt; which will match any URL that starts with &lt;code&gt;/album-rest&lt;/code&gt;. The next segment will be an optional id which is required for the RestController The constraints section allows us to ensure that the characters within a segment are as expected.
    &lt;/p&gt;
    &lt;h1&gt;
        Setup View Strategy
    &lt;/h1&gt;
    &lt;p&gt;
        We add the view strategy to our config at zf2-tutorial/module/Albumrest/config/module.config.php
    &lt;/p&gt;

&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    'controllers' =&gt; array(
        'invokables' =&gt; array(
            'AlbumRest\Controller\AlbumRest' =&gt; 'AlbumRest\Controller\AlbumRestController',
        ),
    ),

    // The following section is new` and should be added to your file
    'router' =&gt; array(
        'routes' =&gt; array(
            'album-rest' =&gt; array(
                'type'    =&gt; 'Segment',
                'options' =&gt; array(
                    'route'    =&gt; '/album-rest[/:id]',
                    'constraints' =&gt; array(
                        'id'     =&gt; '[0-9]+',
                    ),
                    'defaults' =&gt; array(
                        'controller' =&gt; 'AlbumRest\Controller\AlbumRest',
                    ),
                ),
            ),
        ),
    ),
    'view_manager' =&gt; array( //Add this config
        'strategies' =&gt; array(
            'ViewJsonStrategy',
        ),
    ),
&lt;/pre&gt;

    &lt;h1&gt;
        Create the controller
    &lt;/h1&gt;
    &lt;p&gt;
        Let’s go ahead and create our controller class &lt;code&gt;AlbumRestController.php&lt;/code&gt; at &lt;code&gt;zf2-tutorials/module/AlbumRest/src/AlbumRest/Controller&lt;/code&gt;:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
namespace AlbumRest\Controller;

use Zend\Mvc\Controller\AbstractRestfulController;

use Album\Model\Album;
use Album\Form\AlbumForm;
use Album\Model\AlbumTable;
use Zend\View\Model\JsonModel;

class AlbumRestController extends AbstractRestfulController
{
    public function getList()
    {
        # code...
    }

    public function get($id)
    {
        # code...
    }

    public function create($data)
    {
        # code...
    }

    public function update($id, $data)
    {
        # code...
    }

    public function delete($id)
    {
        # code...
    }
}
&lt;/pre&gt;

    &lt;p&gt;
        We have now set up the controller methods to map the HTTP request methods. You can find a detailed explanation of the methods in the &lt;a href=&quot;http://framework.zend.com/manual/2.0/en/modules/zend.mvc.controllers.html#the-abstractrestfulcontroller&quot;&gt;Manual&lt;/a&gt;
    &lt;/p&gt;
    &lt;h1&gt;
        Write the tests
    &lt;/h1&gt;
    &lt;p&gt;
        Our AlbumRest controller doesn’t do much yet, so it should be easy to test.
    &lt;/p&gt;
    &lt;p&gt;
        Create the follwing subdirectories:
    &lt;/p&gt;
    &lt;pre&gt;
    zf2-tutorial/
        /module
            /AlbumRest
                /test
                    /AlbumRestTest
                        /Controller
    &lt;/pre&gt;

    &lt;p&gt;
        Add the 3 files as described in &lt;a href=&quot;http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html&quot;&gt;Unit Testing&lt;/a&gt; to module/AlbumRest/test
    &lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;Bootstrap.php
        &lt;/li&gt;
        &lt;li&gt;phpunit.xml.dist
        &lt;/li&gt;
        &lt;li&gt;TestConfig.php.dist
        &lt;/li&gt;
    &lt;/ul&gt;
    &lt;p&gt;
        Remember here to change the &lt;code&gt;namespace&lt;/code&gt; in &lt;code&gt;Bootstrap.php&lt;/code&gt; and change the the &lt;code&gt;TestConfig.php.dist&lt;/code&gt; to following:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
return array(
    'modules' =&amp;gt; array(
        'Album',
        'AlbumRest'
    ),
    'module_listener_options' =&amp;gt; array(
        'config_glob_paths'    =&amp;gt; array(
            '../../../config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' =&amp;gt; array(
            'module',
            'vendor',
        ),
    ),
);
&lt;/pre&gt;
    &lt;p&gt;
        In &lt;code&gt;phpunit.xml&lt;/code&gt; change the directory to point at AlbumRestTest
    &lt;/p&gt;
    &lt;p&gt;
        Create &lt;code&gt;zf2-tutorial/Album/module/AlbumRest/test/AlbumRestTest/Controller/AlbumRestControllerTest.php&lt;/code&gt; with the following contents:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
namespace AlbumRestTest\Controller;

use AlbumRestTest\Bootstrap;
use AlbumRest\Controller\AlbumRestController;
use Zend\Http\Request;
use Zend\Http\Response;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Router\RouteMatch;
use Zend\Mvc\Router\Http\TreeRouteStack as HttpRouter;
use PHPUnit_Framework_TestCase;

class AlbumRestControllerTest extends PHPUnit_Framework_TestCase
{
    protected $controller;
    protected $request;
    protected $response;
    protected $routeMatch;
    protected $event;

    protected function setUp()
    {
        $serviceManager = Bootstrap::getServiceManager();
        $this-&amp;gt;controller = new AlbumRestController();
        $this-&amp;gt;request    = new Request();
        $this-&amp;gt;routeMatch = new RouteMatch(array('controller' =&amp;gt; 'index'));
        $this-&amp;gt;event      = new MvcEvent();
        $config = $serviceManager-&amp;gt;get('Config');
        $routerConfig = isset($config['router']) ? $config['router'] : array();
        $router = HttpRouter::factory($routerConfig);
        $this-&amp;gt;event-&amp;gt;setRouter($router);
        $this-&amp;gt;event-&amp;gt;setRouteMatch($this-&amp;gt;routeMatch);
        $this-&amp;gt;controller-&amp;gt;setEvent($this-&amp;gt;event);
        $this-&amp;gt;controller-&amp;gt;setServiceLocator($serviceManager);
    }

    public function testGetListCanBeAccessed()
    {
        $result   = $this-&amp;gt;controller-&amp;gt;dispatch($this-&amp;gt;request);
        $response = $this-&amp;gt;controller-&amp;gt;getResponse();

        $this-&amp;gt;assertEquals(200, $response-&amp;gt;getStatusCode());
    }

    public function testGetCanBeAccessed()
    {
        $this-&amp;gt;routeMatch-&amp;gt;setParam('id', '1');

        $result   = $this-&amp;gt;controller-&amp;gt;dispatch($this-&amp;gt;request);
        $response = $this-&amp;gt;controller-&amp;gt;getResponse();

        $this-&amp;gt;assertEquals(200, $response-&amp;gt;getStatusCode());
    }

    public function testCreateCanBeAccessed()
    {
        $this-&amp;gt;request-&amp;gt;setMethod('post');
        $this-&amp;gt;request-&amp;gt;getPost()-&amp;gt;set('artist', 'foo');
        $this-&amp;gt;request-&amp;gt;getPost()-&amp;gt;set('title', 'bar');

        $result   = $this-&amp;gt;controller-&amp;gt;dispatch($this-&amp;gt;request);
        $response = $this-&amp;gt;controller-&amp;gt;getResponse();

        $this-&amp;gt;assertEquals(200, $response-&amp;gt;getStatusCode());
    }

    public function testUpdateCanBeAccessed()
    {
        $this-&amp;gt;routeMatch-&amp;gt;setParam('id', '1');
        $this-&amp;gt;request-&amp;gt;setMethod('put');

        $result   = $this-&amp;gt;controller-&amp;gt;dispatch($this-&amp;gt;request);
        $response = $this-&amp;gt;controller-&amp;gt;getResponse();

        $this-&amp;gt;assertEquals(200, $response-&amp;gt;getStatusCode());
    }

    public function testDeleteCanBeAccessed()
    {
        $this-&amp;gt;routeMatch-&amp;gt;setParam('id', '1');
        $this-&amp;gt;request-&amp;gt;setMethod('delete');

        $result   = $this-&amp;gt;controller-&amp;gt;dispatch($this-&amp;gt;request);
        $response = $this-&amp;gt;controller-&amp;gt;getResponse();

        $this-&amp;gt;assertEquals(200, $response-&amp;gt;getStatusCode());
    }
}
&lt;/pre&gt;
    &lt;p&gt;And execute &lt;code&gt;phpunit&lt;/code&gt; from &lt;code&gt;module/AlbumRest/test&lt;/code&gt;.&lt;/p&gt;
    &lt;pre&gt;
        PHPUnit 3.7.8 by Sebastian Bergmann.

        .....

        Time: 0 seconds, Memory: 5.25Mb

        OK (5 tests, 5 assertions)
    &lt;/pre&gt;
    &lt;p&gt;
        We are going to consume services from the Album module. Let's start adding in some functionality. In our &lt;code&gt;AlbumRestController.php&lt;/code&gt; add:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums:38 lang-prepro&quot;&gt;
public function getAlbumTable()
{
    if (!$this-&amp;gt;albumTable) {
        $sm = $this-&amp;gt;getServiceLocator();
        $this-&amp;gt;albumTable = $sm-&amp;gt;get('Album\Model\AlbumTable');
    }
    return $this-&amp;gt;albumTable;
}
&lt;/pre&gt;
    &lt;p&gt;
        You should also add:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums:13 lang-prepro&quot;&gt;
    protected $albumTable;
&lt;/pre&gt;
    &lt;p&gt;
        Add this test to your &lt;code&gt;AlbumControllerTest.php&lt;/code&gt;:
    &lt;/p&gt;
    &lt;pre class=&quot;prettyprint linenums:88 lang-prepro&quot;&gt;
    public function testGetAlbumTableReturnsAnInstanceOfAlbumTable()
    {
        $this-&amp;gt;assertInstanceOf('Album\Model\AlbumTable', $this-&amp;gt;controller-&amp;gt;getAlbumTable());
    }
    &lt;/pre&gt;
    &lt;h2&gt;
        Listing albums
    &lt;/h2&gt;
    &lt;p&gt;
        In order to list the albums, we need to retrieve them from the model and return a JsonModel. To do this, we fill in getList() within &lt;code&gt;AlbumRestController&lt;/code&gt;. Update the AlbumRestController’s getList() like this:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums:15 lang-prepro&quot;&gt;
public function getList()
{
    $results = $this-&amp;gt;getAlbumTable()-&amp;gt;fetchAll();
    $data = array();
    foreach($results as $result) {
        $data[] = $result;
    }

    return array('data' =&amp;gt; $data);
}
&lt;/pre&gt;
    &lt;p&gt;
        As we do not have any views for our Controller we need a method on how to test these. For this example i am using &lt;code&gt;curl&lt;/code&gt; to test the functionality.
    &lt;/p&gt;
    &lt;pre&gt;
    $ curl -i -H &quot;Accept: application/json&quot; http://zf2-tutorial.localhost/album-rest

    HTTP/1.1 200 OK
    Date: Sat, 10 Nov 2012 19:36:03 GMT
    Server: Apache/2.2.22 (Ubuntu)
    X-Powered-By: PHP/5.4.8-1~precise+1
    Content-Length: 320
    Content-Type: application/json

    {&quot;content&quot;:{&quot;data&quot;:[{&quot;id&quot;:&quot;1&quot;,&quot;artist&quot;:&quot;The  Military  Wives&quot;,&quot;title&quot;:&quot;In  My  Dreams&quot;},{&quot;id&quot;:&quot;2&quot;,&quot;artist&quot;:&quot;Adele&quot;,&quot;title&quot;:&quot;21&quot;},{&quot;id&quot;:&quot;3&quot;,&quot;artist&quot;:&quot;Bruce  Springsteen&quot;,&quot;title&quot;:&quot;Wrecking Ball (Deluxe)&quot;},{&quot;id&quot;:&quot;4&quot;,&quot;artist&quot;:&quot;Lana  Del  Rey&quot;,&quot;title&quot;:&quot;Born  To  Die&quot;},{&quot;id&quot;:&quot;5&quot;,&quot;artist&quot;:&quot;Gotye&quot;,&quot;title&quot;:&quot;Making  Mirrors&quot;}]}}
    &lt;/pre&gt;
    &lt;h1&gt;
        Adding Missing functionality
    &lt;/h1&gt;
    &lt;p&gt;
        Let's add the rest of the functionality to &lt;code&gt;AlbumRestController&lt;/code&gt;.
    &lt;/p&gt;
    &lt;h2&gt;
        Get Album
    &lt;/h2&gt;
&lt;pre class=&quot;prettyprint linenums:26 lang-prepro&quot;&gt;
public function get($id)
{
    $album = $this-&amp;gt;getAlbumTable()-&amp;gt;getAlbum($id);

    return array(&quot;data&quot; =&amp;gt; $album);
}
&lt;/pre&gt;
    &lt;p&gt;
        And run curl to see the output.
    &lt;/p&gt;
    &lt;pre&gt;
    $ curl -i -H &quot;Accept: application/json&quot; http://zf2-tutorial.localhost/album-rest/1

    HTTP/1.1 200 OK
    Date: Sat, 10 Nov 2012 19:45:07 GMT
    Server: Apache/2.2.22 (Ubuntu)
    X-Powered-By: PHP/5.4.8-1~precise+1
    Content-Length: 88
    Content-Type: application/json

    {&quot;content&quot;:{&quot;data&quot;:{&quot;id&quot;:&quot;1&quot;,&quot;artist&quot;:&quot;The  Military  Wives&quot;,&quot;title&quot;:&quot;In  My  Dreams&quot;}}}
    &lt;/pre&gt;
    &lt;h2&gt;
        Add Album
    &lt;/h2&gt;We need to modify the &lt;code&gt;AlbumTable&lt;/code&gt; in &lt;code&gt;module/Album/src/Album/Model&lt;/code&gt; to return the generated id
&lt;pre class=&quot;prettyprint linenums:32 lang-prepro&quot;&gt;
public function saveAlbum(Album $album)
{
    $data = array(
        'artist' =&amp;gt; $album-&amp;gt;artist,
        'title'  =&amp;gt; $album-&amp;gt;title,
    );

    $id = (int)$album-&amp;gt;id;
    if ($id == 0) {
        $this-&amp;gt;tableGateway-&amp;gt;insert($data);
        $id = $this-&amp;gt;tableGateway-&amp;gt;getLastInsertValue(); //Add this line
    } else {
        if ($this-&amp;gt;getAlbum($id)) {
            $this-&amp;gt;tableGateway-&amp;gt;update($data, array('id' =&amp;gt; $id));
        } else {
            throw new \Exception('Form id does not exist');
        }
    }

    return $id; // Add Return
}
&lt;/pre&gt;
    &lt;p&gt;
        Modify the create method in &lt;code&gt;module/AlbumRest/src/AlbumRest/Controller/AlbumRestController&lt;/code&gt; as following:
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums:33 lang-prepro&quot;&gt;
public function create($data)
{
    $form = new AlbumForm();
    $album = new Album();
    $form-&amp;gt;setInputFilter($album-&amp;gt;getInputFilter());
    $form-&amp;gt;setData($data);
    if ($form-&amp;gt;isValid()) {
        $album-&amp;gt;exchangeArray($form-&amp;gt;getData());
        $id = $this-&amp;gt;getAlbumTable()-&amp;gt;saveAlbum($album);
    }

    return new JsonModel(array(
        'data' =&gt; $this-&gt;get($id),
    ));
}
&lt;/pre&gt;
    &lt;pre&gt;
    $ curl -i -H &quot;Accept: application/json&quot; -X POST -d &quot;artist=AC DC&amp;amp;title=Dirty Deeds&quot; http://zf2-tutorial.localhost/album-rest


    HTTP/1.1 200 OK
    Date: Sat, 10 Nov 2012 19:45:07 GMT
    Server: Apache/2.2.22 (Ubuntu)
    X-Powered-By: PHP/5.4.8-1~precise+1
    Content-Length: 88
    Content-Type: application/json

    {&quot;content&quot;:{&quot;data&quot;:{&quot;id&quot;:&quot;1&quot;,&quot;artist&quot;:&quot;The  Military  Wives&quot;,&quot;title&quot;:&quot;In  My  Dreams&quot;}}}
    &lt;/pre&gt;
    &lt;h2&gt;
        Edit Album
    &lt;/h2&gt;
&lt;pre class=&quot;prettyprint linenums:47 lang-prepro&quot;&gt;
public function update($id, $data)
{
    $data['id'] = $id;
    $album = $this-&amp;gt;getAlbumTable()-&amp;gt;getAlbum($id);
    $form  = new AlbumForm();
    $form-&amp;gt;bind($album);
    $form-&amp;gt;setInputFilter($album-&amp;gt;getInputFilter());
    $form-&amp;gt;setData($data);
    if ($form-&amp;gt;isValid()) {
        $id = $this-&amp;gt;getAlbumTable()-&amp;gt;saveAlbum($form-&amp;gt;getData());
    }

    return new JsonModel(array(
        'data' =&gt; $this-&gt;get($id),
    ));
}
&lt;/pre&gt;
    &lt;pre&gt;
    $ curl -i -H &quot;Accept: application/json&quot; -X PUT -d &quot;artist=Ac-Dc&amp;amp;title=Dirty Deeds&quot; http://zf2-tutorial.localhost/album-rest/1

    HTTP/1.1 200 OK
    Date: Sun, 11 Nov 2012 01:25:11 GMT
    Server: Apache/2.2.22 (Ubuntu)
    X-Powered-By: PHP/5.4.8-1~precise+1
    Content-Length: 70
    Content-Type: application/json

    {&quot;content&quot;:{&quot;data&quot;:{&quot;id&quot;:&quot;1&quot;,&quot;artist&quot;:&quot;Ac-Dc&quot;,&quot;title&quot;:&quot;Dirty Deeds&quot;}}}
    &lt;/pre&gt;
    &lt;h2&gt;
        Delete Album
    &lt;/h2&gt;
&lt;pre class=&quot;prettyprint linenums:62 lang-prepro&quot;&gt;
public function delete($id)
{
    $this-&gt;getAlbumTable()-&gt;deleteAlbum($id);

    return new JsonModel(array(
        'data' =&gt; 'deleted',
    ));
}
&lt;/pre&gt;
    &lt;pre&gt;
    $ curl -i -H &quot;Accept: application/json&quot; -X DELETE http://modules.zendframework.com.dev/album-rest/7

    HTTP/1.1 200 OK
    Date: Sun, 11 Nov 2012 01:28:43 GMT
    Server: Apache/2.2.22 (Ubuntu)
    X-Powered-By: PHP/5.4.8-1~precise+1
    Content-Length: 30
    Content-Type: application/json

    {&quot;content&quot;:{&quot;data&quot;:&quot;deleted&quot;}}
    &lt;/pre&gt;
    &lt;p&gt;
        So now we have turned our Album into a Restfull Application. I wanted to implement a jGrid for this tutorial but i belive that would be suited for a new Module. Thanks for all the commments to upgrade/fix this blog.
    &lt;/p&gt;
    &lt;p&gt;
        The sample source code for this Module can be found &lt;a href=&quot;https://github.com/hounddog/AlbumRest&quot;&gt;here&lt;/a&gt;.
    &lt;/p&gt;
&lt;/div&gt;
</content>
    </entry>
    
    <entry>
        <title>Using Traits with Zend Framework 2</title>
        <link href="http://hounddog.github.com/blog/using-traits-in-zend-framework-2"/>
        <updated>2012-11-06T00:00:00+01:00</updated>
        <id>http://hounddog.github.com/blog/using-traits-in-zend-framework-2</id>
        <content type="html">&lt;div class=&quot;row&quot;&gt;
    &lt;p&gt;
        Today i want to show you the usefulness of Traits within ZF 2. Some of you like me are maybe wondering when you want to have the ServiceManager injected you always have to create something like this.
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums&quot;&gt;
&amp;lt;?php
namespace Application\Service;

use Zend\ServiceManager\ServiceManagerAwareInterface;
use Zend\ServiceManager\ServiceManager;

class MyService  implements ServiceManagerAwareInterface
{
    /**
     * @var ServiceManager
     */
    protected $serviceManager;

    //implement some code here

    /**
     * Retrieve service manager instance
     *
     * @return ServiceManager
     */
    public function getServiceManager()
    {
        return $this-&amp;gt;serviceManager;
    }

    /**
     * Set service manager instance
     *
     * @param ServiceManager $locator
     * @return User
     */
    public function setServiceManager(ServiceManager $serviceManager)
    {
        $this-&amp;gt;serviceManager = $serviceManager;
        return $this;
    }
}
&lt;/pre&gt;

    &lt;p&gt;
        This you will probably be doing for many Services. The result... the code becomes bloated. We are not following DRY principles. Instead we are copying and pasting this code all over the place. If the structure changes sometime in the future we have to also replace this everywhere.
    &lt;/p&gt;
    &lt;p&gt;
        If you are using PHP 5.4 You are in luck as you can now use traits. I will not go into detail about traits as there are a good bunch of tutorials out there explaining these and the &lt;a href=&quot;http://php.net/manual/en/language.oop5.traits.php&quot; target=&quot;_blank&quot;&gt;PHP Manual&lt;/a&gt; is also quite extensive on this topic.
    &lt;/p&gt;
    &lt;p&gt;
        I just want to show you a short example here on how you can actually benefit from them.
    &lt;/p&gt;Let's get started creating a trait for ServiceManager. I assume here that you are using the &lt;a href=&quot;https://github.com/zendframework/ZendSkeletonApplication&quot;&gt;ZendSkeletonApplication&lt;/a&gt;.
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
namespace Application\Provider;

use Zend\ServiceManager\ServiceManager;

trait ProvidesServiceManager
{
  /**
   * @var ServiceManager
   */
  protected $serviceManager;

  /**
   * Retrieve service manager instance
   *
   * @return ServiceManager
   */
  public function getServiceManager()
  {
      return $this-&amp;gt;serviceManager;
  }

  /**
   * Set service manager instance
   *
   * @param ServiceManager $locator
   * @return User
   */
  public function setServiceManager(ServiceManager $serviceManager)
  {
      $this-&amp;gt;serviceManager = $serviceManager;
      return $this;
  }
}
&lt;/pre&gt;
    &lt;p&gt;
        To use this we now go back to our Service and change it as follows:
    &lt;/p&gt;
    &lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
namespace Application\Service;

use Zend\ServiceManager\ServiceManagerAwareInterface;
use Application\Provider\ProvidesServiceManager;

class MyService  implements ServiceManagerAwareInterface
{
    use ProvidesServiceManager;// Insert Trait

    // implement code here....
}
&lt;/pre&gt;
    &lt;p&gt;
        And voila, we are now using all the methods from TraitServiceManager within our own service! At the time of writing this Matthew Weier O'Phinney gave me the hint that a trait for EventManager is already existing. Thanks for that.
    &lt;/p&gt;
    &lt;p&gt;
        Let's implement that also in our Service.
    &lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
&amp;lt;?php
namespace Application\Service;

use Zend\EventManager\EventManagerAwareInterface;
use Zend\ServiceManager\ServiceManagerAwareInterface;

use Application\Provider\ProvidesServiceManager;
use Zend\EventManager\ProvidesEvents;

class MyService  implements ServiceManagerAwareInterface, EventManagerAwareInterface
{
    use ProvidesServiceManager, ProvidesEvents; //Insert Multiple Traits

    // implement code here....
}
&lt;/pre&gt;
    &lt;p&gt;
        Now we have implement the functionality required for ServiceManager and EntityManager without needing to implement the getters/setter for these!
    &lt;/p&gt;
    &lt;p&gt;
        There are many other useful things for using Traits i can think of like DbMapper implementing a pagination etc etc etc. I hope you enjoyed this little excursion on How traits can be useful in your daily development. Happy Coding!
    &lt;/p&gt;
&lt;/div&gt;
</content>
    </entry>
    
    <entry>
        <title>Zend Framework 1.x + Doctrine Migrations 2.x - How to</title>
        <link href="http://hounddog.github.com/blog/zend-framework-1.x-doctrine-migrations-2.x-how-to"/>
        <updated>2012-10-05T00:00:00+02:00</updated>
        <id>http://hounddog.github.com/blog/zend-framework-1.x-doctrine-migrations-2.x-how-to</id>
        <content type="html">&lt;div class=&quot;row&quot;&gt;
  &lt;p&gt;
    Hello everybody!
  &lt;/p&gt;

  &lt;p&gt;
    PEM (on irc freenode #dojo) and me have worked hard to make something useful to you!
  &lt;/p&gt;
  &lt;p&gt;
    I'm pretty sure some of you already encountered that situation when you feel like poping your eyes out because of incomplete documentations, or lack of help/support...
    If you are reading this, you most likely were about to throw away your computer in anger... Fear not! We will try to save your day :)
  &lt;p&gt;
  &lt;p&gt;Just follow the steps :&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;
      You can have a look at my repository on github : &lt;a href=&quot;https://github.com/PEM-FR/Doctrine2-ZendFramework1-Migrations-Setup&quot; title=&quot;Doctrine Migration Scripts&quot; target=&quot;_blank&quot;&gt;Doctrine Migration Scripts for Zend Framework support&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      You have now two choices :
      &lt;ul&gt;
        &lt;li&gt;
          Integrates Migrations into your already existing Doctrine folder, in this path : Doctrine/DBAL/Migrations.
        &lt;/li&gt;
        &lt;li&gt;
          Use Migrations as Standalone (in that case jump to step xxx).
        &lt;/li&gt;
      &lt;/ul
    &lt;/li&gt;
  &lt;/ul&gt;
  &lt;h3&gt;USING MIGRATIONS INSIDE DOCTRINE FOLDER&lt;/h3&gt;

  &lt;ul&gt;
    &lt;li&gt;
      So now basically you should have something like this :
      &lt;ul&gt;
       &lt;li&gt;Doctrine/DBAl/Migrations&lt;/li&gt;
       &lt;li&gt;Doctrine/DBAl/Migrations/Configuration&lt;/li&gt;
       &lt;li&gt;Doctrine/DBAl/Migrations/Tools&lt;/li&gt;
       &lt;li&gt;Doctrine/DBAl/Migrations/Tools/Console&lt;/li&gt;
       &lt;li&gt;Doctrine/DBAl/Migrations/Tools/Console/Command&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;In the *scripts* directory you should have a file called ZendConfiguration.php (if not something went wrong go back to step 1)&lt;/li&gt;
    &lt;li&gt;If you have zend framework installed and running, with doctrine, you might want to create a file called doctrine.php (or whatever you like if you know already what we are talking about, or you could use the one provided in the scripts folder).&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;doctrine.php should look like that (DO NOT FORGET TO EDIT THE FILE AND CHANGE THE PATHS)&lt;/p&gt;
  &lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
  // Display errors ?
  //ini_set('display_errors', 1);
  //error_reporting(E_ALL | E_STRICT);

  // Define path to application directory
  // DO NOT FORGET TO EDIT
  defined('APPLICATION_PATH')
      || define('APPLICATION_PATH','/path/to/your/application');

  // Define application environment
  defined('APPLICATION_ENV')
      || define(
          'APPLICATION_ENV',
          (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development')
      );

  // Ensure library/ is on include_path
  // DO NOT FORGET TO EDIT
  set_include_path(
      '/path/to/where/your/zend/library/is' . PATH_SEPARATOR .
      '/path/to/Doctrine' . PATH_SEPARATOR .
      get_include_path()
  );

  // Requiring a batch of Classes we will need for namespacing
  use Doctrine\Common\ClassLoader,
      Doctrine\DBAL\Tools\Console\Helper\ConnectionHelper,
      Doctrine\ORM\Version,
      Doctrine\ORM\Tools\Console\ConsoleRunner,
      Doctrine\ORM\Tools\Console\Helper\EntityManagerHelper,
      Symfony\Component\Console\Helper\HelperSet,
      Symfony\Component\Console\Helper\DialogHelper,
      Symfony\Component\Console\Application;

  // namespacing migrations commands we will be needing later
  use Doctrine\DBAL\Migrations\Tools\Console\Command\DiffCommand,
      Doctrine\DBAL\Migrations\Tools\Console\Command\ExecuteCommand,
      Doctrine\DBAL\Migrations\Tools\Console\Command\GenerateCommand,
      Doctrine\DBAL\Migrations\Tools\Console\Command\MigrateCommand,
      Doctrine\DBAL\Migrations\Tools\Console\Command\StatusCommand,
      Doctrine\DBAL\Migrations\Tools\Console\Command\VersionCommand;

  // We need the Doctrine ClassLoader to manage autoloading
  require_once 'Doctrine/Common/ClassLoader.php';

  // Load Doctrine
  $classLoader = new ClassLoader('Doctrine');
  $classLoader-&gt;register();

  // Load Symfony tools
  $classLoader = new ClassLoader('Symfony', 'Doctrine');
  $classLoader-&gt;register();

  // Load Migration
  $classLoader = new ClassLoader('Migrations', 'Doctrine/DBAL/');
  $classLoader-&gt;register();

  // Zend_Application
  require_once 'Zend/Application.php';

  // Create application
  // DO NOT FORGET TO EDIT
  $application = new Zend_Application(
      APPLICATION_ENV, '/path/to/application.ini'
  );

  // Bootstrap
  $application-&gt;bootstrap();

  // loading doctrine resource, sometimes called entityManager
  // DO NOT FORGET TO EDIT, set the resource to your entityManager
  $em = $application-&gt;getBootstrap()-&gt;getResource('db');

  // Load doctrine helpers
  $helperSet = new HelperSet(array(
      'db'     =&gt; new ConnectionHelper($em-&gt;getConnection()),
      'em'     =&gt; new EntityManagerHelper($em),
      'dialog' =&gt; new DialogHelper()
  ));

  $cli = new Application('Doctrine Command Line Interface', Version::VERSION);
  $cli-&gt;setCatchExceptions(true);
  $cli-&gt;setHelperSet($helperSet);

  // We are settign the commands to bypass the configuration process and
  // directly use our ZendConfiguration
  // Just make sure to load from where the file actually is
  require_once('ZendConfiguration.php');
  $connexion = $em-&gt;getConnection();
  $zendConfig = new ZendConfiguration($connexion);

  // injecting configurations necessary to our ZendConfiguration
  // Pass the Application.ini Parameters to our Configuration
  $applicationConfig = new Zend_Config(
      $application-&gt;getBootstrap()-&gt;getOptions(), true
  );
  // DO NOT FORGET TO EDIT, if needed
  $zendConfig-&gt;setConfig($applicationConfig-&gt;resources-&gt;db-&gt;migration);
  // Here we just need to put some string because the parameter is not optional
  // though will not need it. Just need to call the function
  $zendConfig-&gt;load('zend');

  // Setting up Migrations Commands
  $diffCmd = new DiffCommand();
  $diffCmd-&gt;setMigrationConfiguration($zendConfig);

  $executeCmd = new ExecuteCommand();
  $executeCmd-&gt;setMigrationConfiguration($zendConfig);

  $generateCmd = new GenerateCommand();
  $generateCmd-&gt;setMigrationConfiguration($zendConfig);

  $migrateCmd = new MigrateCommand();
  $migrateCmd-&gt;setMigrationConfiguration($zendConfig);

  $statusCmd = new StatusCommand();
  $statusCmd-&gt;setMigrationConfiguration($zendConfig);

  $versionCmd = new VersionCommand();
  $versionCmd-&gt;setMigrationConfiguration($zendConfig);


  // Register migration Commands
  $cli-&gt;addCommands(array(
      $diffCmd, $executeCmd, $generateCmd, $migrateCmd, $statusCmd, $versionCmd
  ));

  // Register All Doctrine Commands
  ConsoleRunner::addCommands($cli);

  // Runs console application
  $cli-&gt;run();
  &lt;/pre&gt;
  &lt;p&gt;for some more information you might want to check this article : &lt;a href=&quot;http://victimofbabylon.com/setting-up-doctrine-2-cli-with-zend-framework&quot; title=&quot;Setting up doctrine 2 cli for zend framework&quot; target=&quot;_blank&quot;&gt;Setting up doctrine 2 cli for zend framework&lt;/a&gt;
  &lt;p&gt;
  &lt;p&gt;We now have to tweak your Zend Framework application.ini file. Add these few lines :&lt;/p&gt;
  &lt;pre class=&quot;prettyprint linenums lang-prepro&quot;&gt;
  ; ------------------------------------------------------------------------------
  ; Doctrine Migrations Configuration
  ; ------------------------------------------------------------------------------
  resources.db.migration.name = &quot;YourSoft (development) Database Migrations&quot;
  resources.db.migration.tableName = &quot;doctrine_migration_versions&quot;
  resources.db.migration.namespace = &quot;DoctrineMigrations&quot;
  resources.db.migration.directory = APPLICATION_PATH &quot;/path/to/migrationsClass/directory&quot;
  ;set the following two properties if you want to do manual naming on migration classes
  ;resources.doctrine.migration.migrations.migration1.version = &quot;20111020071337&quot;
  ;resources.doctrine.migration.migrations.migration1.class = &quot;DoctrineMigrations\VersionNewMigration&quot;
  &lt;/pre&gt;
  &lt;p&gt;Now, try running from the scripts directory : &lt;/p&gt;
  &lt;pre class=&quot;prettyprint linenums lang-sh&quot;&gt;
  ~$ php doctrine.php list migrations
  &lt;/pre&gt;
  &lt;p&gt;As a result, you should see the commands available, something like that :&lt;/p&gt;
  &lt;pre class=&quot;prettyprint linenums lang-sh&quot;&gt;
    Doctrine Command Line Interface version 2.2.1

    Usage:
      [options] command [arguments]

    Options:
      --help           -h Display this help message.
      --quiet          -q Do not output any message.
      --verbose        -v Increase verbosity of messages.
      --version        -V Display this program version.
      --ansi              Force ANSI output.
      --no-ansi           Disable ANSI output.
      --no-interaction -n Do not ask any interactive question.

    Available commands for the &quot;migration&quot; namespace:
      migrations:diff       Generate a migration by comparing your...
      migrations:execute    Execute a single migration version up or down manually.
      migrations:generate   Generate a blank migration class.
      migrations:migrate    Execute a migration to a specified version...
      migrations:status     View the status of a set of migrations.
      migrations:version    Manually add and delete migration versions...
    &lt;/pre&gt;

  &lt;p&gt;You are now supposed to cry of joy and let a Victory shout be heard by the whole company :)&lt;/p&gt;
&lt;/div&gt;</content>
    </entry>
    
    <entry>
        <title>My Journey in Continuous Deployment</title>
        <link href="http://hounddog.github.com/blog/continuous-deployment-1"/>
        <updated>2012-10-05T00:00:00+02:00</updated>
        <id>http://hounddog.github.com/blog/continuous-deployment-1</id>
        <content type="html">&lt;div class=&quot;row&quot;&gt;
    &lt;p&gt;
      This will be a series of blogs about Continuous Deployment and how to get there. I will be writing about problems which I am facing and what I am experimenting with.
    &lt;/p&gt;

    &lt;p&gt;
      The target of this is to implement a fully automated system which continuously integrates and deploys our development to production servers.
    &lt;/p&gt;

    &lt;p&gt;
      Our main tool we use for this is &lt;a href=&quot;http://jenkins-ci.org/&quot; title=&quot;jenkins&quot;&gt;Jenkins&lt;/a&gt;. If you are not familiar with this. Please have a look. It has lot of plugins which can help you implement automated strategies.
    &lt;/p&gt;

    &lt;p&gt;So, where am I at the moment?&lt;/p&gt;

    &lt;p&gt;
      We are fairly new at using git and are currently discussing viable options on how to implement a successful strategy for git.
    &lt;/p&gt;

    &lt;p&gt;
      Currently I have implemented the solution given &lt;a href=&quot;http://twasink.net/2011/09/20/git-feature-branches-and-jenkins-or-how-i-learned-to-stop-worrying-about-broken-builds/&quot; title=&quot;here&quot;&gt;here&lt;/a&gt;
    &lt;/p&gt;

    &lt;p&gt;
      This solution is great, all the branches are tracked and tested against the master branch.
      But... this provides us with another problem... What if we do not want every branch to be tested directly or tested against the master branch?
    &lt;/p&gt;

    &lt;p&gt;
      For this I am currently looking at opt-in branches by using a configuration file as described &lt;a href=&quot;http://amokti.me/2011/10/11/automatic-opt-in-branch-building-with-jenkins-and-git-2/&quot; title=&quot;here&quot;&gt;here&lt;/a&gt;
    &lt;/p&gt;

    &lt;p&gt;
      What I find interesting in this approach is that I could also modify it to use different jobs within Jenkins by adding parameters in the config file.
      More about this later as I am not sure which approach I would be finally taking.
    &lt;/p&gt;

    &lt;p&gt;
      So, our branching as described above works and all the branches are automatically pushed to the master. Just that each developer has to wait currently for about 12 minutes to know if anything has failed or is Working as expected.
    &lt;/p&gt;

    &lt;p&gt;I like working fast and getting Results fast. &lt;/p&gt;

    &lt;p&gt;
      I have been toying around with Jenkins to make things work faster but hitting lot of Road blocks on the way.
      As this is a pure php project we are also using phing to create the build.
    &lt;/p&gt;

    &lt;p&gt;
      The first question arises when I look at the build.xml which is one huge build process.
    &lt;/p&gt;

    &lt;p&gt;
      To make the build process faster I need to split this up into tasks which can be run in parallel.
    &lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Cleanup the Workspace&lt;/li&gt;
      &lt;li&gt;Initialize the Database&lt;/li&gt;
      &lt;li&gt;Run Unit Tests&lt;/li&gt;
      &lt;li&gt;Run Integration Tests&lt;/li&gt;
      &lt;li&gt;Run Statistic Analysers (PHPMD, Pdepend etc)&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;
      I had a look at Creating Downstream jobs within Jenkins. This is an Interesting Approach but does not suit our needs currently.
    &lt;/p&gt;

    &lt;p&gt;
      A downstream job is a job that executes after the Upstream job is completed.
    &lt;/p&gt;

    &lt;p&gt;
      My first attempt was to have a look at the build pipeline plugin. Works great but the Master job is successful even if the Downstream job fails. So I would never really get a fully broken build through the Downstream jobs.
    &lt;/p&gt;

    &lt;p&gt;
      I am going to check today if it is possible by using the Job Join plugin from Jenkins.
    &lt;/p&gt;

    &lt;p&gt;
      As per the information I have gathered I can run another Job after all the Downstream jobs have Completed which would allow me to aggregate all the final Results.
    &lt;/p&gt;

    &lt;p&gt;
      So, I will get started and let you guys know how it ended very soon!
    &lt;/p&gt;

    &lt;p&gt;
      To be Continued... :)
    &lt;/p&gt;
&lt;/div&gt;</content>
    </entry>
    
    <entry>
        <title>Creating my own page with Jekyll and Github</title>
        <link href="http://hounddog.github.com/blog/creating-my-page-with-jekyll"/>
        <updated>2012-09-29T00:00:00+02:00</updated>
        <id>http://hounddog.github.com/blog/creating-my-page-with-jekyll</id>
        <content type="html">&lt;div class=&quot;row&quot;&gt;
    &lt;div class=&quot;span12 columns&quot;&gt;
        &lt;h2&gt;Why?&lt;/h2&gt;
        &lt;p&gt;I want to share my thoughts with the community.&lt;/p&gt;
        &lt;p&gt;
            I have been working as a Developer for a long time now without my own page.
            So i decided to create one on Github and with a short discussion thx to &lt;a href=&quot;http://ocramius.github.com/blog/moving-my-blog-to-jekyll/&quot; target=&quot;_blank&quot;&gt;Marco Pivetta &lt;/a&gt;. I copied his page and quickly dived into the code and found it very simple to setup.
        &lt;/p&gt;
        &lt;p&gt;
            Within just a few hours i was able to setup and modify my page. So here i am finally. Keep watching for updates.
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;</content>
    </entry>
    
</feed>